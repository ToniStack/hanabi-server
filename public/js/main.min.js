var socket;try{var webSocketURL;if(window.location.protocol=='https:'){webSocketURL='wss://';}else{webSocketURL='ws://';}
webSocketURL+=window.location.host+'/ws';socket=new WebSocket(webSocketURL);}catch(err){showError('Failed to connect to the WebSocket server. Try logging out and back in again.');}
socket.onmessage=function(event){var message=event.data;console.log('Recieved message:',message);if(message.startsWith('error ')){var m=message.match(/^error (.+)$/);var error;if(m){error=JSON.parse(m[1]);}else{showError('Failed to parse the error message from the "error" command.');return;}
showError(error.msg);}else if(message.startsWith('gameList ')){var m=message.match(/^gameList (.+)$/);var gameList;if(m){gameList=JSON.parse(m[1]);}else{showError('Failed to parse the list of games from the "gameList" command.');return;}}else{console.error('Unrecognized message:',message);}}
$('#create-game-button').click(function(e){var message="gameCreate {}";socket.send(message);});$('#past-games-button').click(function(e){});$('#test-button').click(function(e){showError('poop');});function showError(message){BootstrapDialog.show({title:'Error',message:message,buttons:[{label:'Logout',action:function(dialog){window.location.replace('/logout');}}]});}